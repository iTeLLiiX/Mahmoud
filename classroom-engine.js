// ============================================
// VIRTUAL CLASSROOM ENGINE
// Immersive Learning Experience
// ============================================

// Translations for Classroom
const classroomTranslations = {
    de: {
        // Already in German (default)
    },
    en: {
        // Welcome
        'welcome-classroom': 'Welcome to the Classroom, Mahmoud!',
        'today-is': 'Today is',
        'ready-to-learn': '- Ready to learn?',
        'daily-motivation': 'The best time to start was yesterday. The second best is now!',
        
        // Today's Plan
        'todays-plan': 'Today\'s Schedule',
        'your-lessons': 'Your lessons for today',
        'follow-plan': 'Follow the daily plan for optimal learning success',
        
        // Games
        'learning-games': 'Learning Games',
        'learn-playing': 'Learn German while having fun!',
        'word-match': 'Word Match',
        'speed-typer': 'Speed Typer',
        'vocab-memory': 'Vocab Memory',
        'sentence-builder': 'Sentence Builder',
        'listening-challenge': 'Listening Challenge',
        'article-rush': 'Article Rush',
        'play': 'Play',
        'highscore': 'Highscore',
        
        // Scenarios
        'conversation-simulator': 'Conversation Simulator',
        'practice-real-situations': 'Practice real situations',
        'interactive-dialogues': 'Interactive dialogues like in real life',
        'start-scenario': 'Start Scenario',
        
        // Story
        'story-mode': 'Story Mode',
        'learn-through-stories': 'Learn through stories',
        'mariamis-journey': 'Follow Mahmoud\'s journey in Germany',
        
        // Daily Challenge
        'daily-challenge': 'Daily Challenge',
        'new-challenge': 'New challenge every day! Collect bonus points!',
        'todays-challenge': 'Today\'s Challenge',
        'accept-challenge': 'Accept Challenge!',
        'your-streak': 'Your Challenge Streak',
        'days': 'days',
        
        // Teacher
        'your-teacher': 'Your Teacher: Nico',
        'always-here': 'Always here for you!',
        'message-from-nico': 'Message from Nico:',
        'nicos-tips': 'Nico\'s Learning Tips',
        
        // Study Group
        'study-group': 'Study Group',
        'virtual-study-group': 'Virtual Study Group',
        'learn-with-others': 'Learn "with" others (Simulated for motivation)',
        'this-week': 'This Week',
        'points-to-rank': 'points to rank',
        'you-can-do-it': 'You can do it!',
        
        // Immersion
        'immersion-zone': 'Immersion Zone',
        'dive-into-german': 'Dive into the German world',
        'experience-germany': 'Experience Germany virtually',
        
        // Notebook
        'learning-diary': 'Your Learning Diary',
        'notes-reflections': 'Notes & Reflections',
        'document-journey': 'Document your learning journey',
        'daily-notes': 'Daily Notes',
        'vocab-collection': 'Vocabulary Collection',
        'questions-to-nico': 'Questions for Nico',
        'progress-journal': 'Progress Journal',
        'save': 'Save'
    },
    ka: {
        // Georgian translations
        'welcome-classroom': '·Éô·Éî·Éó·Éò·Éö·Éò ·Éò·Éß·Éù·É° ·É®·Éî·Éú·Éò ·Éõ·Éù·Éë·É†·É´·Éê·Éú·Éî·Éë·Éê ·Éô·Éö·Éê·É°·É®·Éò, ·Éõ·Éê·É†·Éò·Éê·Éõ!',
        'today-is': '·Éì·É¶·Éî·É° ·Éê·É†·Éò·É°',
        'ready-to-learn': '- ·Éõ·Éñ·Éê·Éì ·ÉÆ·Éê·É† ·É°·É¨·Éê·Éï·Éö·Éò·É°·Éó·Éï·Éò·É°?',
        'daily-motivation': '·É°·Éê·É£·Éô·Éî·Éó·Éî·É°·Éù ·Éì·É†·Éù ·Éì·Éê·É°·Éê·É¨·Éß·Éî·Éë·Éê·Éì ·Éò·Éß·Éù ·Éí·É£·É®·Éò·Éú. ·Éõ·Éî·Éù·É†·Éî ·É°·Éê·É£·Éô·Éî·Éó·Éî·É°·Éù ·Éê·É†·Éò·É° ·Éê·ÉÆ·Éö·Éê!',
        'todays-plan': '·Éì·É¶·Éî·Éï·Éê·Éú·Éì·Éî·Éö·Éò ·Éí·Éê·Éú·É†·Éò·Éí·Éò',
        'your-lessons': '·É®·Éî·Éú·Éò ·Éí·Éê·Éô·Éï·Éî·Éó·Éò·Éö·Éî·Éë·Éò ·Éì·É¶·Éî·É°',
        'follow-plan': '·Éõ·Éò·É∞·Éß·Éî·Éï·Éò ·Éì·É¶·Éò·É° ·Éí·Éî·Éí·Éõ·Éê·É° ·Éù·Éû·É¢·Éò·Éõ·Éê·Éö·É£·É†·Éò ·É®·Éî·Éì·Éî·Éí·Éî·Éë·Éò·É°·Éó·Éï·Éò·É°',
        'learning-games': '·É°·Éê·É°·É¨·Éê·Éï·Éö·Éù ·Éó·Éê·Éõ·Éê·É®·Éî·Éë·Éò',
        'learn-playing': '·Éò·É°·É¨·Éê·Éï·Éö·Éî ·Éí·Éî·É†·Éõ·Éê·Éú·É£·Éö·Éò ·Éí·Éê·É†·Éó·Éù·Éë·Éò·Éó!',
        'word-match': '·É°·Éò·É¢·Éß·Éï·Éî·Éë·Éò·É° ·Éì·Éê·ÉØ·Éí·É£·É§·Éî·Éë·Éê',
        'speed-typer': '·É°·É¨·É†·Éê·É§·Éò ·Éê·Éô·É†·Éî·É§·Éê',
        'vocab-memory': '·Éõ·Éî·ÉÆ·É°·Éò·Éî·É†·Éî·Éë·Éò·É° ·Éó·Éê·Éõ·Éê·É®·Éò',
        'sentence-builder': '·É¨·Éò·Éú·Éê·Éì·Éê·Éì·Éî·Éë·Éò·É° ·Éê·É¨·Éß·Éù·Éë·Éê',
        'listening-challenge': '·Éõ·Éù·É°·Éõ·Éî·Éú·Éò·É° ·Éí·Éê·Éõ·Éù·É¨·Éï·Éî·Éï·Éê',
        'article-rush': '·Éê·É†·É¢·Éò·Éô·Éö·Éî·Éë·Éò·É° ·É†·É£·É®·Éò',
        'play': '·Éó·Éê·Éõ·Éê·É®·Éò',
        'highscore': '·É°·Éê·É£·Éô·Éî·Éó·Éî·É°·Éù ·É•·É£·Éö·Éê'
    },
    ar: {
        // Arabic translations
        'welcome-classroom': 'ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ ŸÅŸä ÿßŸÑŸÅÿµŸÑÿå ŸÖÿßÿ±ŸäÿßŸÖŸä!',
        'today-is': 'ÿßŸÑŸäŸàŸÖ ŸáŸà',
        'ready-to-learn': '- ŸÖÿ≥ÿ™ÿπÿØ ŸÑŸÑÿ™ÿπŸÑŸÖÿü',
        'daily-motivation': 'ÿ£ŸÅÿ∂ŸÑ ŸàŸÇÿ™ ŸÑŸÑÿ®ÿØÿ° ŸÉÿßŸÜ ÿ®ÿßŸÑÿ£ŸÖÿ≥. ÿ´ÿßŸÜŸä ÿ£ŸÅÿ∂ŸÑ ŸàŸÇÿ™ ŸáŸà ÿßŸÑÿ¢ŸÜ!',
        
        // Today's Plan
        'todays-plan': 'ÿ¨ÿØŸàŸÑ ÿßŸÑŸäŸàŸÖ',
        'your-lessons': 'ÿØÿ±Ÿàÿ≥ŸÉ ŸÑŸáÿ∞ÿß ÿßŸÑŸäŸàŸÖ',
        'follow-plan': 'ÿßÿ™ÿ®ÿπ ÿßŸÑÿÆÿ∑ÿ© ÿßŸÑŸäŸàŸÖŸäÿ© ŸÑÿ™ÿ≠ŸÇŸäŸÇ ÿßŸÑŸÜÿ¨ÿßÿ≠ ÿßŸÑÿ£ŸÖÿ´ŸÑ',
        
        // Games
        'learning-games': 'ÿ£ŸÑÿπÿßÿ® ÿ™ÿπŸÑŸäŸÖŸäÿ©',
        'learn-playing': 'ÿ™ÿπŸÑŸÖ ÿßŸÑÿ£ŸÑŸÖÿßŸÜŸäÿ© ŸÖÿπ ÿßŸÑŸÖÿ™ÿπÿ©!',
        'word-match': 'ŸÖÿ∑ÿßÿ®ŸÇÿ© ÿßŸÑŸÉŸÑŸÖÿßÿ™',
        'word-match-desc': 'ÿßÿ±ÿ®ÿ∑ ÿßŸÑŸÉŸÑŸÖÿßÿ™ ÿßŸÑÿ£ŸÑŸÖÿßŸÜŸäÿ© ÿ®ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿßÿ™',
        'speed-typer': 'ÿßŸÑÿ∑ÿßÿ®ÿπ ÿßŸÑÿ≥ÿ±Ÿäÿπ',
        'speed-typer-desc': 'ÿßŸÉÿ™ÿ® ÿßŸÑŸÉŸÑŸÖÿßÿ™ ÿßŸÑÿ£ŸÑŸÖÿßŸÜŸäÿ© ÿ®ÿ£ÿ≥ÿ±ÿπ ŸÖÿß ŸäŸÖŸÉŸÜ',
        'vocab-memory': 'ÿ∞ÿßŸÉÿ±ÿ© ÿßŸÑŸÖŸÅÿ±ÿØÿßÿ™',
        'vocab-memory-desc': 'ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿßŸÑÿ£ÿ≤Ÿàÿßÿ¨ ÿßŸÑŸÖÿ™ÿ∑ÿßÿ®ŸÇÿ© (ÿ£ŸÑŸÖÿßŸÜŸä-ÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿä)',
        'sentence-builder': 'ÿ®ŸÜÿßÿ° ÿßŸÑÿ¨ŸÖŸÑ',
        'sentence-builder-desc': 'ÿßÿµŸÜÿπ ÿ¨ŸÖŸÑÿßŸã ÿ£ŸÑŸÖÿßŸÜŸäÿ© ÿµÿ≠Ÿäÿ≠ÿ© ŸÖŸÜ ÿßŸÑŸÉŸÑŸÖÿßÿ™',
        'listening-challenge': 'ÿ™ÿ≠ÿØŸä ÿßŸÑÿßÿ≥ÿ™ŸÖÿßÿπ',
        'listening-challenge-desc': 'ÿßÿ≥ÿ™ŸÖÿπ ŸÑŸÑŸÉŸÑŸÖÿßÿ™ ŸàÿßŸÉÿ™ÿ®Ÿáÿß ÿ®ÿ¥ŸÉŸÑ ÿµÿ≠Ÿäÿ≠',
        'article-rush': 'ÿ≥ÿ®ÿßŸÇ ÿßŸÑÿ£ÿØŸàÿßÿ™',
        'article-rush-desc': 'ÿßÿÆÿ™ÿ± ÿßŸÑÿ£ÿØŸàÿßÿ™ ÿ®ÿ£ÿ≥ÿ±ÿπ ŸÖÿß ŸäŸÖŸÉŸÜ! ÿ∂ÿØ ÿßŸÑÿ≤ŸÖŸÜ!',
        'play': 'ÿßŸÑÿπÿ®',
        'highscore': 'ÿ£ÿπŸÑŸâ ŸÜÿ™Ÿäÿ¨ÿ©',
        'best-time': 'ÿ£ŸÅÿ∂ŸÑ ŸàŸÇÿ™',
        'level': 'ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ',
        'streak': 'ÿßŸÑÿ≥ŸÑÿ≥ŸÑÿ©',
        'record': 'ÿßŸÑÿ±ŸÇŸÖ ÿßŸÑŸÇŸäÿßÿ≥Ÿä',
        'easy': 'ÿ≥ŸáŸÑ',
        'medium': 'ŸÖÿ™Ÿàÿ≥ÿ∑',
        'hard': 'ÿµÿπÿ®',
        
        // Scenarios
        'conversation-simulator': 'ŸÖÿ≠ÿßŸÉŸä ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿ©',
        'practice-real-situations': 'ÿ™ÿØÿ±ÿ® ÿπŸÑŸâ ŸÖŸàÿßŸÇŸÅ ÿ≠ŸÇŸäŸÇŸäÿ©',
        'interactive-dialogues': 'ÿ≠Ÿàÿßÿ±ÿßÿ™ ÿ™ŸÅÿßÿπŸÑŸäÿ© ŸÉŸÖÿß ŸÅŸä ÿßŸÑÿ≠Ÿäÿßÿ© ÿßŸÑŸàÿßŸÇÿπŸäÿ©',
        'in-restaurant': 'ŸÅŸä ÿßŸÑŸÖÿ∑ÿπŸÖ',
        'in-restaurant-desc': 'ÿßÿ∑ŸÑÿ® ÿßŸÑÿ∑ÿπÿßŸÖÿå ÿ™ÿ≠ÿØÿ´ ŸÖÿπ ÿßŸÑŸÜÿßÿØŸÑÿå ÿßÿØŸÅÿπ ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ©',
        'at-doctor': 'ÿπŸÜÿØ ÿßŸÑÿ∑ÿ®Ÿäÿ®',
        'at-doctor-desc': 'ÿßÿ¥ÿ±ÿ≠ ÿ£ÿπÿ±ÿßÿ∂ŸÉÿå ÿßŸÅŸáŸÖ ÿßŸÑÿ∑ÿ®Ÿäÿ®ÿå ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ŸàÿµŸÅÿßÿ™',
        'job-interview': 'ŸÖŸÇÿßÿ®ŸÑÿ© ÿπŸÖŸÑ',
        'job-interview-desc': 'ŸÇÿØŸÖ ŸÜŸÅÿ≥ŸÉÿå ÿ£ÿ¨ÿ® ÿπŸÑŸâ ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ©ÿå ÿ£ŸÇŸÜÿπ ÿßŸÑŸÖÿØŸäÿ±',
        'apartment-viewing': 'ŸÖÿπÿßŸäŸÜÿ© ÿ¥ŸÇÿ©',
        'apartment-viewing-desc': 'ÿßÿ≥ÿ£ŸÑ ÿπŸÜ ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑÿå ÿ™ŸÅÿßŸàÿ∂ÿå ŸàŸÇÿπ ÿßŸÑÿπŸÇÿØ',
        'bank-authorities': 'ÿßŸÑÿ®ŸÜŸÉ ŸàÿßŸÑÿ≥ŸÑÿ∑ÿßÿ™',
        'bank-authorities-desc': 'ÿßŸÅÿ™ÿ≠ ÿ≠ÿ≥ÿßÿ®ÿßŸãÿå ÿßŸÖŸÑÿ£ ÿßŸÑŸÜŸÖÿßÿ∞ÿ¨ÿå ÿ™ŸàÿßÿµŸÑ ÿ±ÿ≥ŸÖŸäÿßŸã',
        'small-talk': 'ŸÖÿ≠ÿßÿØÿ´ÿ© ŸÇÿµŸäÿ±ÿ© Ÿàÿ™ŸàÿßÿµŸÑ',
        'small-talk-desc': 'ÿØÿ±ÿØÿ¥ÿå ÿßÿµŸÜÿπ ÿ£ÿµÿØŸÇÿßÿ°ÿå ÿßÿ±ÿ®ÿ∑ ÿπŸÑÿßŸÇÿßÿ™ ÿßÿ¨ÿ™ŸÖÿßÿπŸäÿ©',
        'start-scenario': 'ÿ®ÿØÿ° ÿßŸÑÿ≥ŸäŸÜÿßÿ±ŸäŸà',
        
        // Story Mode
        'story-mode': 'Ÿàÿ∂ÿπ ÿßŸÑŸÇÿµÿ©',
        'learn-through-stories': 'ÿ™ÿπŸÑŸÖ ŸÖŸÜ ÿÆŸÑÿßŸÑ ÿßŸÑŸÇÿµÿµ',
        'mariamis-journey': 'ÿ™ÿßÿ®ÿπ ÿ±ÿ≠ŸÑÿ© ŸÖÿßÿ±ŸäÿßŸÖŸä ŸÅŸä ÿ£ŸÑŸÖÿßŸÜŸäÿß',
        'chapter': 'ÿßŸÑŸÅÿµŸÑ',
        'arrival-germany': 'ÿßŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ ÿ£ŸÑŸÖÿßŸÜŸäÿß',
        'arrival-desc': 'ŸÖÿßÿ±ŸäÿßŸÖŸä ÿ™ÿµŸÑ ÿ•ŸÑŸâ ÿßŸÑŸÖÿ∑ÿßÿ±. ÿπŸÑŸäŸáÿß ÿ•Ÿäÿ¨ÿßÿØ ÿßŸÑÿ∑ÿ±ŸäŸÇ...',
        'first-apartment': 'ÿßŸÑÿ¥ŸÇÿ© ÿßŸÑÿ£ŸàŸÑŸâ',
        'first-apartment-desc': 'ŸÖÿßÿ±ŸäÿßŸÖŸä ÿ™ÿ®ÿ≠ÿ´ ÿπŸÜ ÿ¥ŸÇÿ©. ÿ™ŸÇÿßÿ®ŸÑ ÿµÿßÿ≠ÿ® ÿßŸÑÿπŸÇÿßÿ±...',
        'first-work-day': 'ÿ£ŸàŸÑ ŸäŸàŸÖ ÿπŸÖŸÑ',
        'first-work-day-desc': 'ŸÖÿßÿ±ŸäÿßŸÖŸä ÿ™ÿ®ÿØÿ£ Ÿàÿ∏ŸäŸÅÿ™Ÿáÿß ÿßŸÑÿ¨ÿØŸäÿØÿ©. ÿ≤ŸÖŸÑÿßÿ° ÿ¨ÿØÿØ...',
        'making-friends': 'ÿ™ŸÉŸàŸäŸÜ ÿµÿØÿßŸÇÿßÿ™',
        'making-friends-desc': 'ŸÖÿßÿ±ŸäÿßŸÖŸä ÿ™ÿ∞Ÿáÿ® ÿ•ŸÑŸâ ŸÑŸÇÿßÿ° ŸÑÿ∫ÿ©...',
        'c1-exam': 'ÿßŸÖÿ™ÿ≠ÿßŸÜ C1',
        'c1-exam-desc': 'ÿßŸÑŸäŸàŸÖ ÿßŸÑŸÉÿ®Ÿäÿ±! ŸÖÿßÿ±ŸäÿßŸÖŸä ÿ™ÿÆŸàÿ∂ ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜ...',
        'vocab-words': 'ŸÖŸÅÿ±ÿØÿßÿ™',
        
        // Daily Challenge
        'daily-challenge': 'ÿßŸÑÿ™ÿ≠ÿØŸä ÿßŸÑŸäŸàŸÖŸä',
        'new-challenge': 'ÿ™ÿ≠ÿØŸä ÿ¨ÿØŸäÿØ ŸÉŸÑ ŸäŸàŸÖ! ÿßÿ¨ŸÖÿπ ŸÜŸÇÿßÿ∑ ÿ•ÿ∂ÿßŸÅŸäÿ©!',
        'todays-challenge': 'ÿ™ÿ≠ÿØŸä ÿßŸÑŸäŸàŸÖ',
        'perfect-pronunciation': 'ÿßŸÑŸÜÿ∑ŸÇ ÿßŸÑŸÖÿ´ÿßŸÑŸä',
        'challenge-desc': 'ÿ≥ÿ¨ŸÑ 10 ŸÉŸÑŸÖÿßÿ™ Ÿàÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ÿØŸÇÿ© 90%+',
        'reward': 'ÿßŸÑŸÖŸÉÿßŸÅÿ£ÿ©',
        'bonus-points': 'ŸÜŸÇÿßÿ∑ ÿ•ÿ∂ÿßŸÅŸäÿ©',
        'special-badge': 'ÿ¥ÿßÿ±ÿ© ÿÆÿßÿµÿ©',
        'accept-challenge': 'ŸÇÿ®ŸàŸÑ ÿßŸÑÿ™ÿ≠ÿØŸä!',
        'your-streak': 'ÿ≥ŸÑÿ≥ŸÑÿ™ŸÉ',
        'days': 'ÿ£ŸäÿßŸÖ',
        
        // Teacher
        'your-teacher': 'ŸÖÿπŸÑŸÖŸÉ: ŸÜŸäŸÉŸà',
        'always-here': 'ÿØÿßÿ¶ŸÖÿßŸã ŸáŸÜÿß ŸÖŸÜ ÿ£ÿ¨ŸÑŸÉ!',
        'message-from-nico': 'ÿ±ÿ≥ÿßŸÑÿ© ŸÖŸÜ ŸÜŸäŸÉŸà:',
        'hello-mariami': 'ŸÖÿ±ÿ≠ÿ®ÿßŸã ŸÖÿßÿ±ŸäÿßŸÖŸä!',
        'nicos-tips': 'ŸÜÿµÿßÿ¶ÿ≠ ŸÜŸäŸÉŸà ŸÑŸÑÿ™ÿπŸÑŸÖ',
        'tip-context': 'ŸÜÿµŸäÿ≠ÿ© #1: ÿ™ÿπŸÑŸÖ ŸÖÿπ ÿßŸÑÿ≥ŸäÿßŸÇ',
        'tip-context-desc': 'ŸÑÿß ÿ™ÿ™ÿπŸÑŸÖ ÿ£ÿ®ÿØÿßŸã ŸÉŸÑŸÖÿßÿ™ ŸÖŸÜŸÅÿ±ÿØÿ©! ÿØÿßÿ¶ŸÖÿßŸã ŸÅŸä ÿ¨ŸÖŸÑ ÿ£Ÿà ŸÖŸàÿßŸÇŸÅ. ÿ®Ÿáÿ∞Ÿá ÿßŸÑÿ∑ÿ±ŸäŸÇÿ© ÿ™ÿ®ŸÇŸâ ŸÅŸä ÿßŸÑÿ∞ÿßŸÉÿ±ÿ©!',
        'tip-speak': 'ŸÜÿµŸäÿ≠ÿ© #2: ÿ™ÿ≠ÿØÿ´ ÿ®ÿµŸàÿ™ ÿπÿßŸÑŸç!',
        'tip-speak-desc': 'ÿ≠ÿ™Ÿâ ŸÑŸà ŸÉŸÜÿ™ Ÿàÿ≠ÿØŸÉ - ÿßŸÜÿ∑ŸÇ ÿßŸÑŸÉŸÑŸÖÿßÿ™ ÿ®ÿµŸàÿ™ ÿπÿßŸÑŸç! ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿµŸàÿ™ ŸäŸàŸÖŸäÿßŸã!',
        'tip-mistakes': 'ŸÜÿµŸäÿ≠ÿ© #3: ÿßŸÑÿ£ÿÆÿ∑ÿßÿ° ÿ¨ŸäÿØÿ©!',
        'tip-mistakes-desc': 'ŸÉŸÑ ÿÆÿ∑ÿ£ ŸáŸà ŸÅÿ±ÿµÿ© ŸÑŸÑÿ™ÿπŸÑŸÖ. ŸÑÿß ÿ™ÿÆŸÅ ŸÖŸÜ ÿßÿ±ÿ™ŸÉÿßÿ® ÿßŸÑÿ£ÿÆÿ∑ÿßÿ°!',
        'tip-routine': 'ŸÜÿµŸäÿ≠ÿ© #4: ÿ±Ÿàÿ™ŸäŸÜ ŸäŸàŸÖŸä',
        'tip-routine-desc': '30 ÿØŸÇŸäŸÇÿ© ŸÉŸÑ ŸäŸàŸÖ ÿ£ŸÅÿ∂ŸÑ ŸÖŸÜ 3 ÿ≥ÿßÿπÿßÿ™ ŸÖÿ±ÿ© ŸÅŸä ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ!',
        'tip-fun': 'ŸÜÿµŸäÿ≠ÿ© #5: ÿßÿ≥ÿ™ŸÖÿ™ÿπ!',
        'tip-fun-desc': 'ÿßŸÑÿπÿ® ÿßŸÑÿ£ŸÑÿπÿßÿ®ÿå ÿßÿ≥ÿ™ŸÖÿπ ŸÑŸÑŸÖŸàÿ≥ŸäŸÇŸâ ÿßŸÑÿ£ŸÑŸÖÿßŸÜŸäÿ©ÿå ÿ¥ÿßŸáÿØ ÿ£ŸÅŸÑÿßŸÖÿßŸã ÿ£ŸÑŸÖÿßŸÜŸäÿ©. ÿßŸÑÿ™ÿπŸÑŸÖ Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ŸÖŸÖÿ™ÿπÿßŸã!',
        
        // Study Group
        'study-group': 'ŸÖÿ¨ŸÖŸàÿπÿ© ÿßŸÑÿØÿ±ÿßÿ≥ÿ©',
        'virtual-study-group': 'ŸÖÿ¨ŸÖŸàÿπÿ© ÿØÿ±ÿßÿ≥ÿ© ÿßŸÅÿ™ÿ±ÿßÿ∂Ÿäÿ©',
        'learn-with-others': 'ÿ™ÿπŸÑŸÖ "ŸÖÿπ" ÿßŸÑÿ¢ÿÆÿ±ŸäŸÜ (ŸÖÿ≠ÿßŸÉÿßÿ© ŸÑŸÑÿ™ÿ≠ŸÅŸäÿ≤)',
        'you': 'ÿ£ŸÜÿ™',
        'level-display': 'ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ',
        'points': 'ŸÜŸÇÿßÿ∑',
        'learning-now': 'Ÿäÿ™ÿπŸÑŸÖ ÿßŸÑÿ¢ŸÜ',
        'taking-test': 'ŸäÿÆŸàÿ∂ ÿßÿÆÿ™ÿ®ÿßÿ±ÿßŸã',
        'active-ago': 'ŸÜÿ¥ÿ∑ ŸÖŸÜÿ∞',
        'hours': 'ÿ≥ÿßÿπÿßÿ™',
        'this-week': 'Ÿáÿ∞ÿß ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ',
        'points-to-rank': 'ŸÜŸÇÿ∑ÿ© ÿ•ŸÑŸâ ÿßŸÑŸÖÿ±ŸÉÿ≤',
        'you-can-do-it': 'ÿ£ŸÜÿ™ ÿ™ÿ≥ÿ™ÿ∑Ÿäÿπ ÿ∞ŸÑŸÉ!',
        
        // Immersion Zone
        'immersion-zone': 'ŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑÿßŸÜÿ∫ŸÖÿßÿ≥',
        'dive-into-german': 'ÿßŸÜÿ∫ŸÖÿ≥ ŸÅŸä ÿßŸÑÿπÿßŸÑŸÖ ÿßŸÑÿ£ŸÑŸÖÿßŸÜŸä',
        'experience-germany': 'ÿßÿÆÿ™ÿ®ÿ± ÿ£ŸÑŸÖÿßŸÜŸäÿß ÿßŸÅÿ™ÿ±ÿßÿ∂ŸäÿßŸã',
        'german-tv': 'ÿßŸÑÿ®ÿ±ÿßŸÖÿ¨ ÿßŸÑÿ™ŸÑŸÅÿ≤ŸäŸàŸÜŸäÿ© ÿßŸÑÿ£ŸÑŸÖÿßŸÜŸäÿ©',
        'german-tv-desc': 'ŸÖŸÇÿßÿ∑ÿπ ŸÇÿµŸäÿ±ÿ© ŸÖÿπ ÿ™ÿ±ÿ¨ŸÖÿßÿ™ Ÿàÿ¥ÿ±ÿ≠ ŸÑŸÑŸÖŸÅÿ±ÿØÿßÿ™',
        'german-podcasts': 'ÿßŸÑÿ®ŸàÿØŸÉÿßÿ≥ÿ™ ÿßŸÑÿ£ŸÑŸÖÿßŸÜŸä',
        'german-podcasts-desc': 'ŸÖÿ≠ÿ™ŸàŸâ ÿµŸàÿ™Ÿä ŸÖÿ≠ÿ≥ŸëŸÜ ŸÑŸÑŸÖÿ™ÿπŸÑŸÖŸäŸÜ',
        'slow-news': 'ÿ£ÿÆÿ®ÿßÿ± ÿ®ÿ∑Ÿäÿ¶ÿ© ÿßŸÑŸÜÿ∑ŸÇ',
        'slow-news-desc': 'ŸÖŸàÿßÿ∂Ÿäÿπ ÿ≠ÿßŸÑŸäÿ© ÿ®ÿ£ŸÑŸÖÿßŸÜŸäÿ© ÿ®ÿ≥Ÿäÿ∑ÿ©',
        'german-songs': 'ÿ£ÿ∫ÿßŸÜŸä ÿ£ŸÑŸÖÿßŸÜŸäÿ©',
        'german-songs-desc': 'ŸÖÿπ ŸÉŸÑŸÖÿßÿ™ Ÿàÿ™ÿ±ÿ¨ŸÖÿßÿ™',
        'videos-available': 'ŸÅŸäÿØŸäŸà ŸÖÿ™ÿßÿ≠',
        'episodes': 'ÿ≠ŸÑŸÇÿßÿ™',
        'daily-new': 'ÿ¨ÿØŸäÿØ ŸäŸàŸÖŸäÿßŸã',
        'songs': 'ÿ£ÿ∫ÿßŸÜŸä',
        
        // Notebook
        'learning-diary': 'ÿØŸÅÿ™ÿ± ÿßŸÑÿ™ÿπŸÑŸÖ ÿßŸÑÿÆÿßÿµ ÿ®ŸÉ',
        'notes-reflections': 'ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ Ÿàÿ™ÿ£ŸÖŸÑÿßÿ™',
        'document-journey': 'Ÿàÿ´ŸÇ ÿ±ÿ≠ŸÑÿ© ÿ™ÿπŸÑŸÖŸÉ',
        'daily-notes': 'ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ŸäŸàŸÖŸäÿ©',
        'vocab-collection': 'ŸÖÿ¨ŸÖŸàÿπÿ© ÿßŸÑŸÖŸÅÿ±ÿØÿßÿ™',
        'questions-to-nico': 'ÿ£ÿ≥ÿ¶ŸÑÿ© ŸÑŸÜŸäŸÉŸà',
        'progress-journal': 'ÿØŸÅÿ™ÿ± ÿßŸÑÿ™ŸÇÿØŸÖ',
        'daily-diary': 'ÿØŸÅÿ™ÿ± ÿßŸÑÿ™ÿπŸÑŸÖ ÿßŸÑŸäŸàŸÖŸä',
        'today': 'ÿßŸÑŸäŸàŸÖ',
        'what-learned': 'ŸÖÿßÿ∞ÿß ÿ™ÿπŸÑŸÖÿ™ ÿßŸÑŸäŸàŸÖÿü ŸÖÿß ŸÉÿßŸÜ ÿµÿπÿ®ÿßŸãÿü ŸÖÿß ŸÉÿßŸÜ ŸÖŸÖÿ™ÿπÿßŸãÿü',
        'save': 'ÿ≠ŸÅÿ∏'
    }
};

// Apply classroom translations
function applyClassroomTranslations(lang) {
    // RTL support for Arabic
    if (lang === 'ar') {
        document.body.setAttribute('dir', 'rtl');
        document.documentElement.setAttribute('dir', 'rtl');
    } else {
        document.body.setAttribute('dir', 'ltr');
        document.documentElement.setAttribute('dir', 'ltr');
    }
    
    // Save language
    localStorage.setItem('deutschLernenLanguage', lang);
    
    // Update active button
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.lang === lang) {
            btn.classList.add('active');
        }
    });
}

// Set today's date
document.addEventListener('DOMContentLoaded', function() {
    const today = new Date();
    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
    document.getElementById('todayDate').textContent = today.toLocaleDateString('de-DE', options);
    
    // Initialize classroom
    initClassroom();
    updateProgressFromMain();
    startChallengeTimer();
    initTipsCarousel();
    loadDailyNote();
    
    // Language & theme (reuse from main)
    const savedLang = localStorage.getItem('deutschLernenLanguage') || 'de';
    applyClassroomTranslations(savedLang);
    
    // Language switcher events
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.addEventListener('click', () => applyClassroomTranslations(btn.dataset.lang));
    });
    
    const isDarkMode = localStorage.getItem('deutschLernenDarkMode') === 'true';
    if (isDarkMode) {
        document.body.classList.add('dark-mode');
        document.querySelector('#themeToggle i')?.classList.replace('fa-moon', 'fa-sun');
    }
});

// Initialize classroom
function initClassroom() {
    console.log('üéì Virtual Classroom initialized!');
}

// Update progress from main app
function updateProgressFromMain() {
    const stats = JSON.parse(localStorage.getItem('deutschLernenStats') || '{"points": 0, "minutesLearned": 0}');
    
    // Update your points
    document.getElementById('yourPoints').textContent = stats.points || 0;
    document.getElementById('todayProgress').textContent = stats.minutesLearned || 0;
    
    // Update weekly points (simulated for now)
    document.getElementById('yourWeeklyPoints').textContent = Math.floor((stats.points || 0) * 0.3);
}

// Activity System
function startActivity(activityId) {
    const activities = {
        'warmup': {
            title: 'Warm-up: Schnelles Vokabel-Spiel',
            description: 'Bereit? Wir starten mit einem schnellen Spiel!',
            action: () => startGame('wordmatch')
        },
        'vocabulary': {
            title: 'Neue Vokabeln lernen',
            description: 'Zeit f√ºr neue W√∂rter!',
            action: () => window.location.href = 'index.html#vokabeln'
        },
        'conversation': {
            title: 'Konversations-Praxis',
            description: 'Lass uns zusammen sprechen!',
            action: () => startScenario('restaurant')
        },
        'grammar': {
            title: 'Grammatik-Workshop',
            description: 'Grammatik macht Spa√ü!',
            action: () => window.location.href = 'index.html#grammatik'
        },
        'speaking': {
            title: 'Sprech-√úbung',
            description: 'Nimm deine Stimme auf!',
            action: () => window.location.href = 'index.html#practiceWord'
        },
        'homework': {
            title: 'Hausaufgaben',
            description: 'Zeit zum Schreiben!',
            action: () => switchNotebook('daily')
        }
    };
    
    const activity = activities[activityId];
    if (activity) {
        showNotification(`üéØ ${activity.title}: ${activity.description}`, 'info');
        setTimeout(() => activity.action(), 1000);
    }
}

// Game System
function startGame(gameId) {
    const games = {
        'wordmatch': () => initWordMatchGame(),
        'speedtyping': () => initSpeedTypingGame(),
        'memory': () => initMemoryGame(),
        'sentencebuilder': () => initSentenceBuilderGame(),
        'listening': () => initListeningGame(),
        'articlerush': () => initArticleRushGame()
    };
    
    if (games[gameId]) {
        document.getElementById('gameModal').classList.add('active');
        games[gameId]();
    }
}

function closeGame() {
    document.getElementById('gameModal').classList.remove('active');
}

// Word Match Game
function initWordMatchGame() {
    document.getElementById('gameTitle').textContent = 'Wort-Match';
    document.getElementById('gameScore').textContent = '0';
    
    const words = [
        { de: 'Hallo', en: 'Hello' },
        { de: 'Danke', en: 'Thank you' },
        { de: 'Tsch√ºss', en: 'Goodbye' },
        { de: 'Ja', en: 'Yes' },
        { de: 'Nein', en: 'No' },
        { de: 'Bitte', en: 'Please' },
        { de: 'Guten Morgen', en: 'Good morning' },
        { de: 'Guten Tag', en: 'Good day' }
    ];
    
    let score = 0;
    let currentRound = 0;
    let selected = null;
    
    function renderGame() {
        const word = words[currentRound];
        const options = [word.en, ...words.filter(w => w !== word).map(w => w.en).sort(() => Math.random() - 0.5).slice(0, 3)]
            .sort(() => Math.random() - 0.5);
        
        document.getElementById('gameBody').innerHTML = `
            <div style="text-align: center; margin-bottom: 40px;">
                <div style="font-size: 48px; font-weight: 900; color: #1a4a6e; margin-bottom: 20px;">
                    ${word.de}
                </div>
                <p style="font-size: 18px; color: #64748b;">W√§hle die richtige √úbersetzung:</p>
            </div>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
                ${options.map((opt, i) => `
                    <button onclick="checkWordMatch('${opt}', '${word.en}')" 
                            style="padding: 24px; font-size: 20px; font-weight: 700; background: white; 
                                   border: 3px solid #e2e8f0; border-radius: 16px; cursor: pointer; 
                                   transition: all 0.3s ease;">
                        ${opt}
                    </button>
                `).join('')}
            </div>
            <div style="text-align: center; margin-top: 40px; font-size: 16px; color: #64748b;">
                Runde: ${currentRound + 1} / ${words.length}
            </div>
        `;
    }
    
    window.checkWordMatch = function(selected, correct) {
        if (selected === correct) {
            score += 10;
            document.getElementById('gameScore').textContent = score;
            showNotification('‚úÖ Richtig!', 'success');
            
            currentRound++;
            if (currentRound < words.length) {
                setTimeout(renderGame, 500);
            } else {
                setTimeout(() => {
                    document.getElementById('gameBody').innerHTML = `
                        <div style="text-align: center;">
                            <div style="font-size: 72px; margin-bottom: 20px;">üéâ</div>
                            <h2 style="font-size: 32px; color: #1a4a6e; margin-bottom: 16px;">Fantastisch!</h2>
                            <p style="font-size: 20px; color: #64748b; margin-bottom: 32px;">
                                Du hast <strong>${score}</strong> Punkte erreicht!
                            </p>
                            <button onclick="closeGame()" class="btn btn-primary btn-large">
                                Fertig
                            </button>
                        </div>
                    `;
                    updateGameHighscore('wordmatch', score);
                }, 500);
            }
        } else {
            showNotification('‚ùå Falsch! Versuch es nochmal!', 'error');
        }
    };
    
    renderGame();
}

// Speed Typing Game
function initSpeedTypingGame() {
    document.getElementById('gameTitle').textContent = 'Schnell-Tipper';
    
    const words = ['Hallo', 'Danke', 'Bitte', 'Tsch√ºss', 'Ja', 'Nein', 'Guten Morgen', 'Guten Tag', 'Auf Wiedersehen', 'Entschuldigung'];
    let score = 0;
    let currentWord = 0;
    let startTime = Date.now();
    
    function nextWord() {
        if (currentWord >= words.length) {
            const totalTime = ((Date.now() - startTime) / 1000).toFixed(1);
            document.getElementById('gameBody').innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 72px; margin-bottom: 20px;">‚ö°</div>
                    <h2>Super schnell!</h2>
                    <p style="font-size: 24px; margin: 20px 0;">Zeit: <strong>${totalTime}s</strong></p>
                    <p>Punkte: <strong>${score}</strong></p>
                    <button onclick="closeGame()" class="btn btn-primary btn-large" style="margin-top: 20px;">Fertig</button>
                </div>
            `;
            updateGameHighscore('speedtyping', score);
            return;
        }
        
        const word = words[currentWord];
        document.getElementById('gameBody').innerHTML = `
            <div style="text-align: center;">
                <div style="font-size: 56px; font-weight: 900; color: #1a4a6e; margin-bottom: 40px;">
                    ${word}
                </div>
                <input type="text" id="typeInput" 
                       style="width: 100%; max-width: 400px; padding: 20px; font-size: 24px; 
                              text-align: center; border: 3px solid #e2e8f0; border-radius: 16px;"
                       placeholder="Tippe hier..." autocomplete="off" autofocus>
                <p style="margin-top: 20px; color: #64748b;">Wort ${currentWord + 1} / ${words.length}</p>
            </div>
        `;
        
        const input = document.getElementById('typeInput');
        input.addEventListener('input', (e) => {
            if (e.target.value === word) {
                score += 10;
                document.getElementById('gameScore').textContent = score;
                showNotification('‚úÖ Perfekt!', 'success');
                currentWord++;
                setTimeout(nextWord, 300);
            }
        });
    }
    
    nextWord();
}

// Memory Game
function initMemoryGame() {
    document.getElementById('gameTitle').textContent = 'Vokabel-Memory';
    
    const pairs = [
        { de: 'Hallo', en: 'Hello' },
        { de: 'Danke', en: 'Thank you' },
        { de: 'Tsch√ºss', en: 'Goodbye' },
        { de: 'Ja', en: 'Yes' },
        { de: 'Nein', en: 'No' },
        { de: 'Bitte', en: 'Please' }
    ];
    
    let cards = [];
    pairs.forEach(pair => {
        cards.push({ text: pair.de, pairId: pair.de, type: 'de' });
        cards.push({ text: pair.en, pairId: pair.de, type: 'en' });
    });
    cards = cards.sort(() => Math.random() - 0.5);
    
    let flipped = [];
    let matched = [];
    let moves = 0;
    
    function renderMemory() {
        document.getElementById('gameBody').innerHTML = `
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px;">
                ${cards.map((card, i) => `
                    <button onclick="flipCard(${i})" 
                            class="memory-card ${matched.includes(card.pairId) ? 'matched' : ''}" 
                            id="card-${i}"
                            style="padding: 24px; font-size: 18px; font-weight: 700; 
                                   background: ${flipped.includes(i) || matched.includes(card.pairId) ? '#10b981' : '#1a4a6e'}; 
                                   color: white; border: none; border-radius: 12px; cursor: pointer; 
                                   min-height: 100px; transition: all 0.3s ease;">
                        ${flipped.includes(i) || matched.includes(card.pairId) ? card.text : '?'}
                    </button>
                `).join('')}
            </div>
            <p style="text-align: center; margin-top: 24px; font-size: 18px; color: #64748b;">
                Z√ºge: <strong>${moves}</strong> | Gefunden: <strong>${matched.length}/${pairs.length}</strong>
            </p>
        `;
    }
    
    window.flipCard = function(index) {
        if (flipped.length >= 2 || flipped.includes(index) || matched.includes(cards[index].pairId)) return;
        
        flipped.push(index);
        renderMemory();
        
        if (flipped.length === 2) {
            moves++;
            const [first, second] = flipped;
            if (cards[first].pairId === cards[second].pairId) {
                matched.push(cards[first].pairId);
                flipped = [];
                showNotification('‚úÖ Treffer!', 'success');
                if (matched.length === pairs.length) {
                    setTimeout(() => {
                        document.getElementById('gameBody').innerHTML = `
                            <div style="text-align: center;">
                                <div style="font-size: 72px; margin-bottom: 20px;">üéâ</div>
                                <h2>Alle gefunden!</h2>
                                <p style="font-size: 20px; margin: 20px 0;">In <strong>${moves}</strong> Z√ºgen!</p>
                                <button onclick="closeGame()" class="btn btn-primary btn-large">Fertig</button>
                            </div>
                        `;
                    }, 500);
                } else {
                    renderMemory();
                }
            } else {
                setTimeout(() => {
                    flipped = [];
                    renderMemory();
                }, 1000);
            }
        }
    };
    
    renderMemory();
}

// Sentence Builder Game
function initSentenceBuilderGame() {
    document.getElementById('gameTitle').textContent = 'Satz-Baumeister';
    
    const sentences = [
        { words: ['Ich', 'bin', 'Mahmoud'], correct: 'Ich bin Mahmoud' },
        { words: ['Guten', 'Morgen', '!'], correct: 'Guten Morgen !' },
        { words: ['Wie', 'geht', 'es', 'dir', '?'], correct: 'Wie geht es dir ?' },
        { words: ['Ich', 'komme', 'aus', 'Georgien'], correct: 'Ich komme aus Georgien' }
    ];
    
    let currentSentence = 0;
    let score = 0;
    let userSentence = [];
    
    function renderSentence() {
        const sentence = sentences[currentSentence];
        const shuffled = [...sentence.words].sort(() => Math.random() - 0.5);
        
        document.getElementById('gameBody').innerHTML = `
            <div style="text-align: center; margin-bottom: 40px;">
                <p style="font-size: 18px; color: #64748b; margin-bottom: 20px;">
                    Baue den Satz:
                </p>
                <div id="userSentence" style="min-height: 60px; padding: 20px; background: #f8fafc; 
                                               border-radius: 12px; font-size: 24px; font-weight: 700; 
                                               color: #1a4a6e; margin-bottom: 30px;">
                    ${userSentence.join(' ') || 'Klicke auf die W√∂rter...'}
                </div>
            </div>
            <div style="display: flex; flex-wrap: wrap; gap: 12px; justify-content: center; margin-bottom: 30px;">
                ${shuffled.map((word, i) => `
                    <button onclick="addWord('${word}')" 
                            style="padding: 16px 24px; font-size: 18px; font-weight: 700; 
                                   background: white; border: 3px solid #e2e8f0; border-radius: 12px; 
                                   cursor: pointer; transition: all 0.3s ease;">
                        ${word}
                    </button>
                `).join('')}
            </div>
            <div style="display: flex; gap: 12px; justify-content: center;">
                <button onclick="clearSentence()" class="btn btn-outline">
                    <i class="fa-solid fa-rotate-left"></i> Zur√ºcksetzen
                </button>
                <button onclick="checkSentence()" class="btn btn-primary">
                    <i class="fa-solid fa-check"></i> Pr√ºfen
                </button>
            </div>
        `;
    }
    
    window.addWord = function(word) {
        userSentence.push(word);
        renderSentence();
    };
    
    window.clearSentence = function() {
        userSentence = [];
        renderSentence();
    };
    
    window.checkSentence = function() {
        const sentence = sentences[currentSentence];
        if (userSentence.join(' ') === sentence.correct) {
            score += 20;
            document.getElementById('gameScore').textContent = score;
            showNotification('‚úÖ Perfekt!', 'success');
            
            currentSentence++;
            userSentence = [];
            
            if (currentSentence < sentences.length) {
                setTimeout(renderSentence, 500);
            } else {
                setTimeout(() => {
                    document.getElementById('gameBody').innerHTML = `
                        <div style="text-align: center;">
                            <div style="font-size: 72px; margin-bottom: 20px;">üåü</div>
                            <h2>Alle S√§tze korrekt!</h2>
                            <p style="font-size: 20px; margin: 20px 0;">Score: <strong>${score}</strong></p>
                            <button onclick="closeGame()" class="btn btn-primary btn-large">Fertig</button>
                        </div>
                    `;
                }, 500);
            }
        } else {
            showNotification('‚ùå Nicht ganz richtig! Versuch es nochmal!', 'error');
        }
    };
    
    renderSentence();
}

// Listening Game
function initListeningGame() {
    document.getElementById('gameTitle').textContent = 'H√∂r-Challenge';
    document.getElementById('gameBody').innerHTML = `
        <div style="text-align: center;">
            <p style="font-size: 18px; color: #64748b; margin-bottom: 30px;">
                H√∂re das Wort und tippe es korrekt!
            </p>
            <button onclick="speakWord('Hallo')" class="btn btn-primary btn-large" style="margin-bottom: 30px;">
                <i class="fa-solid fa-volume-high"></i> Wort anh√∂ren
            </button>
            <input type="text" id="listeningInput" 
                   style="width: 100%; max-width: 400px; padding: 20px; font-size: 24px; 
                          text-align: center; border: 3px solid #e2e8f0; border-radius: 16px;"
                   placeholder="Tippe das Wort..." autocomplete="off">
            <button onclick="checkListening()" class="btn btn-primary" style="margin-top: 20px;">
                Pr√ºfen
            </button>
        </div>
    `;
}

function checkListening() {
    const input = document.getElementById('listeningInput').value;
    if (input.toLowerCase() === 'hallo') {
        showNotification('‚úÖ Richtig geh√∂rt!', 'success');
        setTimeout(closeGame, 1500);
    } else {
        showNotification('‚ùå Nicht ganz! H√∂r nochmal genau hin!', 'error');
    }
}

// Article Rush Game
function initArticleRushGame() {
    document.getElementById('gameTitle').textContent = 'Artikel-Rush';
    
    const words = [
        { word: 'Haus', article: 'das' },
        { word: 'Auto', article: 'das' },
        { word: 'Frau', article: 'die' },
        { word: 'Mann', article: 'der' },
        { word: 'Kind', article: 'das' },
        { word: 'Buch', article: 'das' },
        { word: 'Tisch', article: 'der' },
        { word: 'T√ºr', article: 'die' }
    ];
    
    let currentWord = 0;
    let score = 0;
    let startTime = Date.now();
    
    function renderArticleRush() {
        if (currentWord >= words.length) {
            const totalTime = ((Date.now() - startTime) / 1000).toFixed(1);
            document.getElementById('gameBody').innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 72px; margin-bottom: 20px;">‚ö°</div>
                    <h2>Blitzschnell!</h2>
                    <p style="font-size: 24px; margin: 20px 0;">Zeit: <strong>${totalTime}s</strong></p>
                    <p>Punkte: <strong>${score}</strong></p>
                    <button onclick="closeGame()" class="btn btn-primary btn-large" style="margin-top: 20px;">Fertig</button>
                </div>
            `;
            updateGameHighscore('articlerush', score);
            return;
        }
        
        const current = words[currentWord];
        document.getElementById('gameBody').innerHTML = `
            <div style="text-align: center;">
                <div style="font-size: 64px; font-weight: 900; color: #1a4a6e; margin-bottom: 40px;">
                    ${current.word}
                </div>
                <div style="display: flex; gap: 16px; justify-content: center;">
                    <button onclick="checkArticle('der', '${current.article}')" 
                            style="padding: 24px 48px; font-size: 32px; font-weight: 900; 
                                   background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%); 
                                   color: white; border: none; border-radius: 16px; cursor: pointer;">
                        der
                    </button>
                    <button onclick="checkArticle('die', '${current.article}')" 
                            style="padding: 24px 48px; font-size: 32px; font-weight: 900; 
                                   background: linear-gradient(135deg, #f472b6 0%, #ec4899 100%); 
                                   color: white; border: none; border-radius: 16px; cursor: pointer;">
                        die
                    </button>
                    <button onclick="checkArticle('das', '${current.article}')" 
                            style="padding: 24px 48px; font-size: 32px; font-weight: 900; 
                                   background: linear-gradient(135deg, #34d399 0%, #10b981 100%); 
                                   color: white; border: none; border-radius: 16px; cursor: pointer;">
                        das
                    </button>
                </div>
                <p style="margin-top: 30px; font-size: 18px; color: #64748b;">
                    ${currentWord + 1} / ${words.length}
                </p>
            </div>
        `;
    }
    
    window.checkArticle = function(selected, correct) {
        if (selected === correct) {
            score += 10;
            document.getElementById('gameScore').textContent = score;
            showNotification('‚úÖ Richtig!', 'success');
            currentWord++;
            setTimeout(renderArticleRush, 300);
        } else {
            showNotification(`‚ùå Falsch! Es ist "${correct}"`, 'error');
            currentWord++;
            setTimeout(renderArticleRush, 1000);
        }
    };
    
    renderArticleRush();
}

// Update game highscores
function updateGameHighscore(gameId, score) {
    const current = parseInt(localStorage.getItem(`game_${gameId}_high`) || '0');
    if (score > current) {
        localStorage.setItem(`game_${gameId}_high`, score);
        document.getElementById(`${gameId}High`).textContent = score;
    }
}

// Scenario System
function startScenario(scenarioId) {
    showNotification(`üé≠ Szenario "${scenarioId}" wird geladen...`, 'info');
    setTimeout(() => {
        showNotification('üí° Nutze die Konversations-√úbungen auf der Hauptseite!', 'info');
        setTimeout(() => window.location.href = 'index.html#ubungen', 1500);
    }, 1500);
}

// Story System
function openChapter(chapterNum) {
    if (chapterNum > 2) {
        showLockedMessage();
        return;
    }
    showNotification(`üìñ Kapitel ${chapterNum} wird ge√∂ffnet...`, 'info');
    setTimeout(() => window.location.href = 'lektionen.html', 1000);
}

function showLockedMessage() {
    showNotification('üîí Dieses Kapitel wird freigeschaltet, wenn du das vorherige abgeschlossen hast!', 'info');
}

// Daily Challenge
function startDailyChallenge() {
    showNotification('üöÄ Challenge gestartet! Nutze das Voice Recording auf der Hauptseite!', 'info');
    setTimeout(() => window.location.href = 'index.html#practiceWord', 1500);
}

function startChallengeTimer() {
    // Countdown to midnight
    function updateTimer() {
        const now = new Date();
        const midnight = new Date();
        midnight.setHours(24, 0, 0, 0);
        const diff = midnight - now;
        
        const hours = Math.floor(diff / 3600000);
        const minutes = Math.floor((diff % 3600000) / 60000);
        const seconds = Math.floor((diff % 60000) / 1000);
        
        document.getElementById('challengeTimer').innerHTML = `
            <i class="fa-regular fa-clock"></i>
            <span>${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}</span>
        `;
    }
    
    updateTimer();
    setInterval(updateTimer, 1000);
}

// Tips Carousel
let currentTip = 0;

function initTipsCarousel() {
    showTip(0);
}

function showTip(index) {
    const slides = document.querySelectorAll('.tip-slide');
    slides.forEach((slide, i) => {
        slide.classList.toggle('active', i === index);
    });
    currentTip = index;
}

function nextTip() {
    const slides = document.querySelectorAll('.tip-slide');
    currentTip = (currentTip + 1) % slides.length;
    showTip(currentTip);
}

function previousTip() {
    const slides = document.querySelectorAll('.tip-slide');
    currentTip = (currentTip - 1 + slides.length) % slides.length;
    showTip(currentTip);
}

window.nextTip = nextTip;
window.previousTip = previousTip;

// Immersion System
function startImmersion(type) {
    showNotification(`üåç ${type} wird geladen...`, 'info');
    setTimeout(() => {
        showNotification('üí° Feature kommt bald! Nutze YouTube f√ºr deutsche Inhalte!', 'info');
    }, 1000);
}

// Notebook System
function switchNotebook(section) {
    const buttons = document.querySelectorAll('.notebook-btn');
    buttons.forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
    
    // In a full implementation, this would switch notebook sections
    showNotification(`üìù Notizbuch: ${section}`, 'info');
}

function changeDate(direction) {
    showNotification('üìÖ Datum ge√§ndert', 'info');
}

function saveNote(type) {
    const noteText = document.getElementById('dailyNotes').value;
    localStorage.setItem(`note_${type}_${new Date().toDateString()}`, noteText);
    showNotification('üíæ Notiz gespeichert!', 'success');
}

function loadDailyNote() {
    const note = localStorage.getItem(`note_daily_${new Date().toDateString()}`) || '';
    const textarea = document.getElementById('dailyNotes');
    if (textarea) {
        textarea.value = note;
    }
}

// Notification System (reuse from main)
function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = `notification notification-${type}`;
    notification.textContent = message;
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 16px 24px;
        background: ${type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#3b82f6'};
        color: white;
        border-radius: 12px;
        font-weight: 600;
        z-index: 10001;
        animation: slideIn 0.3s ease;
        box-shadow: 0 8px 24px rgba(0,0,0,0.2);
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease';
        setTimeout(() => notification.remove(), 300);
    }, 3000);
}

// Speech synthesis (reuse from main)
function speakWord(word) {
    if ('speechSynthesis' in window) {
        const utterance = new SpeechSynthesisUtterance(word);
        utterance.lang = 'de-DE';
        utterance.rate = 0.8;
        speechSynthesis.speak(utterance);
    }
}

// Export functions
window.startActivity = startActivity;
window.startGame = startGame;
window.closeGame = closeGame;
window.startScenario = startScenario;
window.openChapter = openChapter;
window.showLockedMessage = showLockedMessage;
window.startDailyChallenge = startDailyChallenge;
window.startImmersion = startImmersion;
window.switchNotebook = switchNotebook;
window.changeDate = changeDate;
window.saveNote = saveNote;
window.checkListening = checkListening;
window.speakWord = speakWord;

